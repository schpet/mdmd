{"id":"bd-18i","title":"serve2 slice 3: SSR markdown pipeline","description":"## Covered Sections\n- executable-decomposition\n- slice-3-ssr-markdown-pipeline-gfm-link-rewrite-mermaid-mode\n- validation-strategy\n- cross-slice-dependencies\n- gate-a-approval-checklist\n\n## Acceptance Criteria\n- GFM fixtures render correctly.\n- Mermaid fences render as diagrams (`client`) or code (`off`).\n- Nested relative links resolve to correct rendered pages from configured root.\n- Markdown conversion occurs server-side; client JS is limited to Mermaid execution and TOC active-state behavior.\n\n## Verification Steps\n- Run fixture-based render tests for tables/task-lists/strikethrough and syntax highlighting output markers.\n- Run Mermaid mode integration tests asserting rendered diagram container in `client` mode and preserved code fence in `off` mode.\n- Run link-rewrite tests from nested directories asserting resolved served URLs and no root-escape rewrites.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-23T06:57:33.996857597Z","created_by":"exedev","updated_at":"2026-02-24T00:11:18.158404927Z","closed_at":"2026-02-24T00:11:18.158385471Z","close_reason":"Cleaning up for fresh start","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-18i","depends_on_id":"bd-kcr","type":"blocks","created_at":"2026-02-23T06:57:37.409975929Z","created_by":"exedev","metadata":"{}","thread_id":""}]}
{"id":"bd-19b","title":"Heading navigation: n/p to jump between headings","description":"Implement heading-to-heading navigation using n (next heading) and p (previous heading). When pressed, the viewport should jump so the target heading appears at the top of the screen (or near the top with a small margin). The status bar should indicate the current heading context. This directly mirrors delta's navigate feature but built into the TUI.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-02-21T00:28:51.683391877Z","created_by":"exedev","updated_at":"2026-02-21T00:59:21.446601573Z","closed_at":"2026-02-21T00:59:21.446560142Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-19b","depends_on_id":"bd-1by","type":"blocks","created_at":"2026-02-23T05:24:10Z","created_by":"import","metadata":"{}","thread_id":""},{"issue_id":"bd-19b","depends_on_id":"bd-1sf","type":"blocks","created_at":"2026-02-23T05:24:10Z","created_by":"import","metadata":"{}","thread_id":""}]}
{"id":"bd-1by","title":"Viewport scrolling: j/k/arrows/page-up/page-down/gg/G navigation","description":"Implement vertical scrolling through the rendered markdown content. The viewport should track a scroll offset and render only the visible portion. Support: j/Down (scroll down one line), k/Up (scroll up one line), Ctrl-d/Page-Down (half page down), Ctrl-u/Page-Up (half page up), g/Home (top of document), G/End (bottom of document). Show a scroll position indicator in the status bar.","status":"closed","priority":0,"issue_type":"feature","created_at":"2026-02-21T00:28:51.402568381Z","created_by":"exedev","updated_at":"2026-02-21T00:55:38.501072239Z","closed_at":"2026-02-21T00:55:38.501024827Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1by","depends_on_id":"bd-p4x","type":"blocks","created_at":"2026-02-23T05:24:10Z","created_by":"import","metadata":"{}","thread_id":""}]}
{"id":"bd-1o1","title":"Vim-like search: / to search with highlighted matches and n/N navigation","description":"Implement vim-style search. Pressing '/' enters search mode with a search bar at the bottom. As the user types, matches are highlighted in the document (incremental search). Press Enter to confirm the search. Then use Ctrl-n/Ctrl-p (since n/p are taken by heading nav) to jump between matches. Press Escape to cancel search. The match count and current match index should be shown in the status bar.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-02-21T00:28:52.266944042Z","created_by":"exedev","updated_at":"2026-02-21T01:27:30.674300091Z","closed_at":"2026-02-21T01:27:30.674242613Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1o1","depends_on_id":"bd-1by","type":"blocks","created_at":"2026-02-23T05:24:10Z","created_by":"import","metadata":"{}","thread_id":""}]}
{"id":"bd-1sf","title":"Markdown parsing: AST extraction with heading tree and link collection","description":"Implement markdown file parsing using pulldown-cmark. Parse the file into a structured representation that includes: (1) a flat list of content blocks (paragraphs, code blocks, lists, etc.) with their line ranges, (2) a heading tree with heading level, text, and line position, (3) a collection of all links with their text, URL, and position. This module is pure logic with no TUI dependency, making it easily unit-testable.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-21T00:28:50.821214527Z","created_by":"exedev","updated_at":"2026-02-21T00:43:41.340688781Z","closed_at":"2026-02-21T00:41:01.258983258Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1sf","depends_on_id":"bd-2rl","type":"blocks","created_at":"2026-02-23T05:24:10Z","created_by":"import","metadata":"{}","thread_id":""}]}
{"id":"bd-24s","title":"CLI interface: clap argument handling, --help, error messages","description":"Wire up proper CLI argument handling using clap. The binary should accept a positional markdown file path argument, support --help, and provide graceful error messages for common issues (file not found, not a markdown file, permission denied). Add a --version flag. If no file is given, show usage information.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-21T00:28:53.467357871Z","created_by":"exedev","updated_at":"2026-02-21T01:29:33.081621419Z","closed_at":"2026-02-21T01:29:33.081576672Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-24s","depends_on_id":"bd-2rl","type":"blocks","created_at":"2026-02-23T05:24:10Z","created_by":"import","metadata":"{}","thread_id":""}]}
{"id":"bd-267","title":"Outline modal: hierarchical heading view with live document preview","description":"Implement an outline overlay (triggered by 'o') that displays all headings in a hierarchical list, similar to Zed's Cmd-Shift-O. Headings are indented by level and prefixed with '#' symbols to denote hierarchy. The current heading (based on scroll position) should be pre-selected when the modal opens. As the user moves up/down in the outline list, the document behind the modal should scroll to show that heading's section. Pressing Enter selects and closes the modal at that position. Pressing Escape closes without changing position.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-02-21T00:28:51.962901586Z","created_by":"exedev","updated_at":"2026-02-21T01:18:15.824741236Z","closed_at":"2026-02-21T01:18:15.824667721Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-267","depends_on_id":"bd-19b","type":"blocks","created_at":"2026-02-23T05:24:10Z","created_by":"import","metadata":"{}","thread_id":""}]}
{"id":"bd-28p","title":"serve2 slice 1: CLI + bootstrap","description":"## Covered Sections\n- mdmd-serve2-replay-plan-2026-02-23-revision-2\n- overview\n- workflow-diagram\n- dependencies-and-implementation-notes\n- executable-decomposition\n- slice-1-cli-surface-and-server-bootstrap\n- risks-and-mitigations\n- validation-strategy\n- test-infrastructure-bootstrap\n- per-slice-validation-commands\n- manual-smoke-checklist-before-gate-a-sign-off\n- regression-guard-for-tui-backward-compatibility\n- operational-checks\n- startup\n- runtime-error-handling\n- large-file-and-resource-limits\n- graceful-shutdown\n- open-questions-resolved\n- cross-slice-dependencies\n- revision-pass-round-1-incorporated\n- gate-a-approval-checklist\n\n## Acceptance Criteria\n- CLI flags parse and route to runtime config correctly: `--port`, `--host`, `--root`, `--open`, `--no-tailscale`, `--mermaid-mode <client|off>`.\n- First free port at or above requested/default is selected within retry cap; cap exhaustion exits with actionable error.\n- Non-`AddrInUse` bind failures exit immediately with actionable error text.\n- Ctrl-C/SIGTERM performs graceful shutdown without panic.\n- `mdmd <file>` and `mdmd view <file>` still launch TUI path unchanged.\n\n## Verification Steps\n- Run unit tests covering CLI argument parsing and dispatch (`serve` vs TUI commands).\n- Run integration test that binds an occupied port and confirms auto-increment behavior and retry-cap failure path.\n- Run integration test that starts server and sends SIGINT/SIGTERM, asserting clean shutdown exit.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-23T06:57:33.814115841Z","created_by":"exedev","updated_at":"2026-02-24T00:11:17.437942082Z","closed_at":"2026-02-24T00:11:17.437913041Z","close_reason":"Cleaning up for fresh start","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2fs","title":"Link following: Enter to open linked markdown documents with back navigation","description":"When a link is focused (via Tab navigation from bd-3o8), pressing Enter on a link to a local .md file should open that file in mdmd, replacing the current document. Implement a navigation stack so the user can press Backspace or a back key to return to the previous document at the same scroll position. External URLs should be opened in the system browser.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-02-21T00:28:52.871364150Z","created_by":"exedev","updated_at":"2026-02-21T01:35:57.258977503Z","closed_at":"2026-02-21T01:35:57.258928168Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2fs","depends_on_id":"bd-3o8","type":"blocks","created_at":"2026-02-23T05:24:10Z","created_by":"import","metadata":"{}","thread_id":""}]}
{"id":"bd-2rl","title":"Project scaffolding: Cargo project with ratatui/crossterm TUI skeleton","description":"Initialize the Rust project with Cargo.toml including dependencies: ratatui, crossterm, pulldown-cmark, clap. Create a minimal main.rs that initializes the terminal with crossterm, enters raw mode, sets up the ratatui event loop, renders an empty screen, and exits cleanly on 'q'. This is the foundation all other features build on.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-21T00:28:50.541913395Z","created_by":"exedev","updated_at":"2026-02-21T00:34:03.113219904Z","closed_at":"2026-02-21T00:34:03.113164879Z","close_reason":"Scaffolded Cargo project with ratatui/crossterm TUI skeleton","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-324","title":"serve2 slice 5: cache + revalidation + compression","description":"## Covered Sections\n- executable-decomposition\n- slice-5-cache-revalidation-and-compression\n- validation-strategy\n- cross-slice-dependencies\n\n## Acceptance Criteria\n- Unchanged requests avoid unnecessary rerender.\n- Revalidation headers are present and `304` works correctly.\n- Compression is applied when client supports it.\n- Concurrent requests do not race or corrupt cache state.\n\n## Verification Steps\n- Run cache unit tests asserting key invalidation on file identity changes and reuse when unchanged.\n- Run HTTP integration tests for `ETag`/`Last-Modified` and conditional `If-None-Match`/`If-Modified-Since` returning `304`.\n- Run compression negotiation tests with `Accept-Encoding: gzip` asserting compressed text responses.\n- Run concurrency stress test with parallel requests to same document asserting deterministic responses.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-23T06:57:34.192977685Z","created_by":"exedev","updated_at":"2026-02-24T00:11:18.383144730Z","closed_at":"2026-02-24T00:11:18.383125757Z","close_reason":"Cleaning up for fresh start","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-324","depends_on_id":"bd-18i","type":"blocks","created_at":"2026-02-23T06:57:37.621470492Z","created_by":"exedev","metadata":"{}","thread_id":""}]}
{"id":"bd-39a","title":"serve2 slice 6: tailscale + bind host policy","description":"## Covered Sections\n- executable-decomposition\n- slice-6-tailscale-discovery-bind-host-policy-and-startup-url-selection\n- dependencies-and-implementation-notes\n- validation-strategy\n- cross-slice-dependencies\n- gate-a-approval-checklist\n\n## Acceptance Criteria\n- Bind host follows the 3-case policy in the plan.\n- Tailscale DNS URL is primary when available.\n- Localhost URL is always printed.\n- Missing/broken/hanging tailscale command never blocks startup.\n\n## Verification Steps\n- Run unit tests for host-selection decision table (explicit host, tailscale present, tailscale absent).\n- Run subprocess timeout/error-path tests with mocked `tailscale status --json` outputs (valid, invalid, timeout).\n- Run startup output tests asserting deterministic URL ordering and localhost inclusion.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-23T06:57:34.298549250Z","created_by":"exedev","updated_at":"2026-02-24T00:11:17.660230894Z","closed_at":"2026-02-24T00:11:17.660205768Z","close_reason":"Cleaning up for fresh start","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-39a","depends_on_id":"bd-28p","type":"blocks","created_at":"2026-02-23T06:57:37.725557921Z","created_by":"exedev","metadata":"{}","thread_id":""}]}
{"id":"bd-39h","title":"Terminal resize handling and responsive layout","description":"Ensure the application handles terminal resize events gracefully. When the terminal is resized, the content should reflow, scroll position should be maintained (or adjusted to stay reasonable), and all modals should re-center. Also handle very small terminal sizes gracefully (show a 'terminal too small' message if below minimum size).","status":"closed","priority":3,"issue_type":"task","created_at":"2026-02-21T00:28:54.074687071Z","created_by":"exedev","updated_at":"2026-02-21T01:42:43.778412177Z","closed_at":"2026-02-21T01:42:43.778367121Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-39h","depends_on_id":"bd-1by","type":"blocks","created_at":"2026-02-23T05:24:10Z","created_by":"import","metadata":"{}","thread_id":""},{"issue_id":"bd-39h","depends_on_id":"bd-267","type":"blocks","created_at":"2026-02-23T05:24:10Z","created_by":"import","metadata":"{}","thread_id":""}]}
{"id":"bd-3jp","title":"serve2 slice 4: heading-first navigation","description":"## Covered Sections\n- executable-decomposition\n- slice-4-heading-first-navigation-ux\n- validation-strategy\n- cross-slice-dependencies\n\n## Acceptance Criteria\n- TOC links map 1:1 to heading IDs.\n- Active section is visually highlighted while scrolling.\n- Duplicate heading text yields stable unique IDs.\n\n## Verification Steps\n- Run slug-generation unit tests for duplicate and punctuation-heavy headings.\n- Run DOM-level tests (or snapshot assertions) verifying TOC anchor/heading ID parity.\n- Run browser integration check asserting active-state class changes while scrolling fixture content.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-23T06:57:34.095403578Z","created_by":"exedev","updated_at":"2026-02-24T00:11:18.605946485Z","closed_at":"2026-02-24T00:11:18.605921729Z","close_reason":"Cleaning up for fresh start","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-3jp","depends_on_id":"bd-18i","type":"blocks","created_at":"2026-02-23T06:57:37.516927417Z","created_by":"exedev","metadata":"{}","thread_id":""}]}
{"id":"bd-3o8","title":"Link detection, highlighting, and Tab navigation between links","description":"Visually highlight markdown links in the rendered document with a distinct style (underline + color). Implement Tab/Shift-Tab to cycle between links. When a link is focused, show the URL in the status bar. This creates the accessibility-inspired link navigation described in the spec.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-02-21T00:28:52.559065613Z","created_by":"exedev","updated_at":"2026-02-21T01:11:29.365253779Z","closed_at":"2026-02-21T01:11:29.365206792Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-3o8","depends_on_id":"bd-1sf","type":"blocks","created_at":"2026-02-23T05:24:10Z","created_by":"import","metadata":"{}","thread_id":""},{"issue_id":"bd-3o8","depends_on_id":"bd-p4x","type":"blocks","created_at":"2026-02-23T05:24:10Z","created_by":"import","metadata":"{}","thread_id":""}]}
{"id":"bd-4yc","title":"serve3 gate A epic: mdmd serve SSR delivery","description":"Objective and Scope:\nDeliver Gate A of mdmd serve as a production-ready SSR markdown web server with deterministic behavior for CLI contract, routing safety, rendering parity baseline, heading-first UX, tailscale-aware startup URLs, and HTTP performance semantics.\n\nImplementation Details:\nCoordinate child slices bd-4yc.1 through bd-4yc.8 as the canonical dependency graph. Keep implementation SSR-first in Rust, preserve existing mdmd file-view behavior, and maintain explicit observability and tests for each behavior contract.\n\nDependency Links:\nRoot epic for all serve3 Gate A tasks and subtasks. Child dependency ordering is expressed via parent-child and blocks edges.\n\nAcceptance Criteria:\nAll child beads are closed; acceptance criteria in docs/plans/serve3/plan.md are met; startup/runtime behavior matches locked Gate A decisions.\n\nVerification Steps (unit and e2e requirements, with logging expectations):\nRun full unit and e2e matrix from bd-4yc.8. Validate logs include startup host policy rationale, bind/port selection, resolved root+entry, URL pair, resolver decision path, render/cache/compression decisions, and tailscale probe outcome.\n\nBackground / Rationale / Constraints / Intent:\nThis epic exists so future maintainers can execute Gate A without reopening planning context. Scope is intentionally tight to serve3 requirements and excludes watch mode, sanitize mode, and server-side Mermaid rasterization.","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-02-23T21:35:28.887208058Z","created_by":"exedev","updated_at":"2026-02-23T23:49:48.182905036Z","closed_at":"2026-02-23T23:49:48.182884298Z","close_reason":"Cleaning up failed planner run","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-4yc.1","title":"serve3 slice 1: CLI + bootstrap contract","description":"Objective and Scope:\nImplement mdmd serve command/bootstrap contract while preserving backward-compatible mdmd file invocation behavior.\n\nImplementation Details:\nOwns CLI/runtime bootstrap and startup lifecycle: declared options, default port 3333 behavior, bounded AddrInUse increment policy, graceful Ctrl-C/SIGTERM shutdown, and deterministic startup summary outputs.\n\nDependency Links:\nParent: bd-4yc. Blocks bd-4yc.2 (routing) and bd-4yc.7 (tailscale URL policy). Child chain: bd-4yc.1.1 -> bd-4yc.1.2 -> bd-4yc.1.3.\n\nAcceptance Criteria:\nCLI contract is stable and documented by tests; bind retry behavior is bounded and reasoned; startup output contains contract fields consumed by validation tasks.\n\nVerification Steps (unit and e2e requirements, with logging expectations):\nUnit: flag parsing/defaults, invalid input handling, retry cap behavior, startup formatter.\nE2E: occupied-port retries, shutdown on signal, startup output contract checks.\nLogging: bind retry reason classes, final bind target, and shutdown trigger classification.\n\nBackground / Rationale / Constraints / Intent:\nThis slice establishes operator-facing startup behavior for every downstream slice. Keep it deterministic so later routing/render/perf tasks can rely on stable startup semantics.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-23T21:35:29.005896034Z","created_by":"exedev","updated_at":"2026-02-23T23:49:47.964233982Z","closed_at":"2026-02-23T23:49:47.964202975Z","close_reason":"Cleaning up failed planner run","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-4yc.1","depends_on_id":"bd-4yc","type":"parent-child","created_at":"2026-02-23T21:35:29.005896034Z","created_by":"exedev","metadata":"{}","thread_id":""}]}
{"id":"bd-4yc.1.1","title":"serve3 subtask: CLI arg surface + backward compatibility","description":"Objective and Scope:\nImplement parser and command wiring for mdmd serve path while preserving mdmd file invocation behavior.\n\nImplementation Details:\nAdd and validate options --port, --host, --root, --open, --no-tailscale, and --mermaid-mode; ensure legacy invocation path remains unchanged.\n\nDependency Links:\nParent task is bd-4yc.1.\n\nAcceptance Criteria:\nAll options parse and flow into runtime config; legacy command behavior is unchanged.\n\nVerification Steps (unit and e2e requirements, with logging expectations):\nUnit tests for argument parsing and defaults; e2e smoke tests for legacy and new invocation forms; startup logs include resolved config summary.\\n\\nBackground / Rationale / Constraints / Intent:\\nThis bead is self-contained for future maintainers and should be implementable without reopening plan docs. Keep scope tight, preserve existing mdmd behavior outside serve3 Gate A, and prefer deterministic logs/tests so regressions are diagnosable.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-23T21:35:30.089833383Z","created_by":"exedev","updated_at":"2026-02-23T23:49:47.723339646Z","closed_at":"2026-02-23T23:49:47.723305005Z","close_reason":"Cleaning up failed planner run","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-4yc.1.1","depends_on_id":"bd-4yc.1","type":"parent-child","created_at":"2026-02-23T21:35:30.089833383Z","created_by":"exedev","metadata":"{}","thread_id":""}]}
{"id":"bd-4yc.1.2","title":"serve3 subtask: bounded port probe + graceful shutdown","description":"Objective and Scope:\nImplement bind retry loop and controlled shutdown lifecycle.\n\nImplementation Details:\nStart at requested or default port and increment only on AddrInUse with bounded attempts; handle Ctrl-C and SIGTERM graceful drain.\n\nDependency Links:\nParent task is bd-4yc.1; blocked by bd-4yc.1.1.\n\nAcceptance Criteria:\nRetry logic matches policy and stops on non-AddrInUse errors; shutdown exits cleanly.\n\nVerification Steps (unit and e2e requirements, with logging expectations):\nUnit tests for retry decision matrix; e2e with pre-bound ports and signal termination; logs record each retry and shutdown trigger.\\n\\nBackground / Rationale / Constraints / Intent:\\nThis bead is self-contained for future maintainers and should be implementable without reopening plan docs. Keep scope tight, preserve existing mdmd behavior outside serve3 Gate A, and prefer deterministic logs/tests so regressions are diagnosable.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-23T21:35:30.231963312Z","created_by":"exedev","updated_at":"2026-02-23T23:49:58.648576199Z","closed_at":"2026-02-23T23:49:58.648546690Z","close_reason":"Cleaning up failed planner run","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-4yc.1.2","depends_on_id":"bd-4yc.1","type":"parent-child","created_at":"2026-02-23T21:35:30.231963312Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.1.2","depends_on_id":"bd-4yc.1.1","type":"blocks","created_at":"2026-02-23T21:35:36.344219795Z","created_by":"exedev","metadata":"{}","thread_id":""}]}
{"id":"bd-4yc.1.3","title":"serve3 subtask: startup summary output + --open launch semantics","description":"Objective and Scope:\nFinalize operator-facing bootstrap UX by making startup output deterministic and implementing --open behavior that launches the resolved primary URL without changing server semantics.\n\nImplementation Details:\n- Emit startup output as a stable, parseable block with these required fields: bind host, bound port, resolved root path, resolved entry path, primary URL, localhost fallback URL, and effective mermaid mode.\n- When --open is set, invoke platform opener exactly once after successful bind/start and target the same primary URL printed to stdout.\n- If opener command fails, log a warning and continue serving; this must never crash or block startup completion.\n- Keep output wording stable enough for snapshot tests and automation scripts.\n\nDependency Links:\nParent: bd-4yc.1.\nBlocked by: bd-4yc.1.2 (port/bind lifecycle established first).\nBlocks: validation startup-output matrix work under bd-4yc.8.\n\nAcceptance Criteria:\n- Startup output always includes root and entry and both URLs.\n- --open launches the selected primary URL after server startup.\n- Opener failure degrades to warning-only behavior.\n- No regression to non-serve CLI flows.\n\nVerification Steps (unit and e2e requirements, with logging expectations):\n- Unit: output formatter snapshot tests for deterministic field order and labels.\n- Unit: open-launch decision matrix for --open true/false and opener failure path.\n- E2E: run serve with --open under mocked opener and assert invoked URL equals printed primary URL.\n- Logging: assert startup summary lines and opener success/failure log entries include reason codes.\n\nBackground / Rationale / Constraints / Intent:\nThe serve command is frequently consumed both by humans and scripts; stable startup output prevents tooling drift and speeds debugging. --open is convenience only, so failures must be non-fatal.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-23T21:39:04.978952301Z","created_by":"exedev","updated_at":"2026-02-23T23:49:59.156901117Z","closed_at":"2026-02-23T23:49:59.156881397Z","close_reason":"Cleaning up failed planner run","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-4yc.1.3","depends_on_id":"bd-4yc.1","type":"parent-child","created_at":"2026-02-23T21:39:04.978952301Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.1.3","depends_on_id":"bd-4yc.1.2","type":"blocks","created_at":"2026-02-23T21:39:50.734255742Z","created_by":"exedev","metadata":"{}","thread_id":""}]}
{"id":"bd-4yc.2","title":"serve3 slice 2: root-safe routing + resolver","description":"Objective and Scope:\nImplement root-safe routing and deterministic path resolution for markdown + static content under configured root.\n\nImplementation Details:\nServe / and /*path with explicit precedence: exact path -> .md fallback -> README.md -> index.md. Enforce canonical under-root checks to prevent traversal and symlink escapes. Support markdown raw output via ?raw=1 and clear HTTP error contract.\n\nDependency Links:\nParent: bd-4yc. Blocked by bd-4yc.1. Blocks bd-4yc.3 and bd-4yc.6. Child chain: bd-4yc.2.1 -> bd-4yc.2.2 -> bd-4yc.2.3.\n\nAcceptance Criteria:\nOnly in-root files are served; resolver precedence is deterministic; markdown raw mode works; missing paths emit explicit 404 behavior.\n\nVerification Steps (unit and e2e requirements, with logging expectations):\nUnit: precedence matrix, traversal rejection, symlink breakout rejection.\nE2E: nested fixtures, MIME checks, raw mode, and 404 path coverage.\nLogging: normalized request path, resolution rule selected, and rejection/error reason class.\n\nBackground / Rationale / Constraints / Intent:\nRouting safety is a security and correctness boundary. Downstream rendering/performance features assume resolver outputs are canonical and deterministic.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-23T21:35:29.136116625Z","created_by":"exedev","updated_at":"2026-02-23T23:49:58.898751482Z","closed_at":"2026-02-23T23:49:58.898731246Z","close_reason":"Cleaning up failed planner run","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-4yc.2","depends_on_id":"bd-4yc","type":"parent-child","created_at":"2026-02-23T21:35:29.136116625Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.2","depends_on_id":"bd-4yc.1","type":"blocks","created_at":"2026-02-23T21:35:33.418411586Z","created_by":"exedev","metadata":"{}","thread_id":""}]}
{"id":"bd-4yc.2.1","title":"serve3 subtask: path resolver precedence + markdown/raw responses","description":"Objective and Scope:\nImplement deterministic path resolution and markdown/raw response branching.\n\nImplementation Details:\nResolution order exact, .md, README.md, index.md; query raw=1 returns markdown source with text/markdown content type.\n\nDependency Links:\nParent task is bd-4yc.2; blocked by bd-4yc.1.\n\nAcceptance Criteria:\nResolver chooses expected file across fixture permutations; raw mode bypasses HTML wrapper.\n\nVerification Steps (unit and e2e requirements, with logging expectations):\nUnit tests for precedence order; e2e route matrix including nested paths and raw output; debug logs include chosen resolution branch.\\n\\nBackground / Rationale / Constraints / Intent:\\nThis bead is self-contained for future maintainers and should be implementable without reopening plan docs. Keep scope tight, preserve existing mdmd behavior outside serve3 Gate A, and prefer deterministic logs/tests so regressions are diagnosable.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-23T21:35:30.384821169Z","created_by":"exedev","updated_at":"2026-02-23T23:49:58.416160975Z","closed_at":"2026-02-23T23:49:58.416131562Z","close_reason":"Cleaning up failed planner run","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-4yc.2.1","depends_on_id":"bd-4yc.1","type":"blocks","created_at":"2026-02-23T21:35:36.556849890Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.2.1","depends_on_id":"bd-4yc.2","type":"parent-child","created_at":"2026-02-23T21:35:30.384821169Z","created_by":"exedev","metadata":"{}","thread_id":""}]}
{"id":"bd-4yc.2.2","title":"serve3 subtask: traversal/symlink escape protections + static MIME","description":"Objective and Scope:\nEnforce root confinement and correct static file serving behavior.\n\nImplementation Details:\nCanonicalize paths and reject root escapes, traversal, and symlink breakout; serve static assets with MIME detection; explicit 404 for misses.\n\nDependency Links:\nParent task is bd-4yc.2; blocked by bd-4yc.2.1.\n\nAcceptance Criteria:\nNo request can escape configured root; static files return correct content type; missing files return 404.\n\nVerification Steps (unit and e2e requirements, with logging expectations):\nUnit tests for root confinement edge cases; e2e symlink traversal attempts and static MIME checks; logs include rejection reason class.\\n\\nBackground / Rationale / Constraints / Intent:\\nThis bead is self-contained for future maintainers and should be implementable without reopening plan docs. Keep scope tight, preserve existing mdmd behavior outside serve3 Gate A, and prefer deterministic logs/tests so regressions are diagnosable.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-23T21:35:30.532425079Z","created_by":"exedev","updated_at":"2026-02-23T23:50:00.022511922Z","closed_at":"2026-02-23T23:50:00.022487015Z","close_reason":"Cleaning up failed planner run","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-4yc.2.2","depends_on_id":"bd-4yc.2","type":"parent-child","created_at":"2026-02-23T21:35:30.532425079Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.2.2","depends_on_id":"bd-4yc.2.1","type":"blocks","created_at":"2026-02-23T21:35:36.763192105Z","created_by":"exedev","metadata":"{}","thread_id":""}]}
{"id":"bd-4yc.2.3","title":"serve3 subtask: HTTP error contract + resolver observability","description":"Objective and Scope:\nDefine and implement the HTTP response contract and resolver observability for non-happy paths so routing behavior is predictable for users and tests.\n\nImplementation Details:\n- Normalize method handling for markdown/static routes: GET/HEAD supported, others return explicit status (e.g. 405) with stable error body semantics.\n- Standardize 404/403/405 response shape and content type policy.\n- Ensure resolver logging emits structured reason classes: exact_match, md_fallback, readme_fallback, index_fallback, not_found, traversal_reject, root_escape_reject, method_reject.\n- Maintain low overhead by keeping verbose resolver logs at debug level.\n\nDependency Links:\nParent: bd-4yc.2.\nBlocked by: bd-4yc.2.2 (path safety and MIME behavior in place first).\nBlocks: verification tasks that assert stable HTTP/error and resolver logs.\n\nAcceptance Criteria:\n- Unsupported methods and unresolved paths return deterministic status codes and response formats.\n- Resolver reason classes are emitted consistently for each request path.\n- HEAD behavior matches GET headers without response body.\n\nVerification Steps (unit and e2e requirements, with logging expectations):\n- Unit: status mapping table tests for route + method combinations.\n- Unit: resolver reason enum coverage and serialization formatting.\n- E2E: fixture requests validate 404/405 and HEAD behavior across markdown/static routes.\n- Logging: assert debug log lines include normalized request path and resolver reason class.\n\nBackground / Rationale / Constraints / Intent:\nOperational debugging depends on deterministic failure behavior. Explicit reason classes avoid ambiguous logs and reduce triage time when link resolution or path safety checks fail.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-23T21:39:14.786539408Z","created_by":"exedev","updated_at":"2026-02-23T23:50:00.736935190Z","closed_at":"2026-02-23T23:50:00.736914246Z","close_reason":"Cleaning up failed planner run","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-4yc.2.3","depends_on_id":"bd-4yc.2","type":"parent-child","created_at":"2026-02-23T21:39:14.786539408Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.2.3","depends_on_id":"bd-4yc.2.2","type":"blocks","created_at":"2026-02-23T21:39:50.967164085Z","created_by":"exedev","metadata":"{}","thread_id":""}]}
{"id":"bd-4yc.3","title":"serve3 slice 3: SSR markdown pipeline (comrak + syntect)","description":"Objective and Scope:\nDeliver SSR markdown rendering baseline in Rust with practical GitHub-flavored behavior and stable local-link semantics.\n\nImplementation Details:\nUse comrak with explicit GFM extensions, apply syntect server-side fenced-code highlighting, and rewrite local markdown links for nested serve routes while preserving external links/fragments. Maintain fixture corpus for parity guardrails.\n\nDependency Links:\nParent: bd-4yc. Blocked by bd-4yc.2. Blocks bd-4yc.4, bd-4yc.5, and bd-4yc.6. Child chain: bd-4yc.3.1 -> {bd-4yc.3.2, bd-4yc.3.3} -> bd-4yc.3.4.\n\nAcceptance Criteria:\nSSR output supports required GFM baseline; code blocks are highlighted with deterministic fallback; local markdown links resolve across directory depth.\n\nVerification Steps (unit and e2e requirements, with logging expectations):\nUnit: renderer options, highlight fallback paths, rewrite edge cases.\nE2E: GFM fixture corpus including tables/task lists/fenced code/links.\nLogging: renderer mode, highlight fallback reason, and rewrite decision classes.\n\nBackground / Rationale / Constraints / Intent:\nThis is the core user-visible behavior. Keep parsing/rendering mostly server-side for predictable output and performance.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-23T21:35:29.258879339Z","created_by":"exedev","updated_at":"2026-02-23T23:50:00.265714914Z","closed_at":"2026-02-23T23:50:00.265693953Z","close_reason":"Cleaning up failed planner run","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-4yc.3","depends_on_id":"bd-4yc","type":"parent-child","created_at":"2026-02-23T21:35:29.258879339Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.3","depends_on_id":"bd-4yc.2","type":"blocks","created_at":"2026-02-23T21:35:33.626271827Z","created_by":"exedev","metadata":"{}","thread_id":""}]}
{"id":"bd-4yc.3.1","title":"serve3 subtask: comrak GFM options + SSR template integration","description":"Objective and Scope:\nProduce SSR HTML with explicit GFM-compatible parser and renderer options.\n\nImplementation Details:\nUse comrak config for tables, task lists, strikethrough, autolinks, and fenced code; integrate renderer output into serve HTML template shell.\n\nDependency Links:\nParent task is bd-4yc.3; blocked by bd-4yc.2.\n\nAcceptance Criteria:\nFixture markdown renders expected structural HTML for baseline GFM features.\n\nVerification Steps (unit and e2e requirements, with logging expectations):\nUnit tests for renderer option toggles; e2e golden tests for representative fixtures; logs record renderer profile at startup.\\n\\nBackground / Rationale / Constraints / Intent:\\nThis bead is self-contained for future maintainers and should be implementable without reopening plan docs. Keep scope tight, preserve existing mdmd behavior outside serve3 Gate A, and prefer deterministic logs/tests so regressions are diagnosable.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-23T21:35:30.695258105Z","created_by":"exedev","updated_at":"2026-02-23T23:49:59.788822522Z","closed_at":"2026-02-23T23:49:59.788802815Z","close_reason":"Cleaning up failed planner run","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-4yc.3.1","depends_on_id":"bd-4yc.2","type":"blocks","created_at":"2026-02-23T21:35:36.962367239Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.3.1","depends_on_id":"bd-4yc.3","type":"parent-child","created_at":"2026-02-23T21:35:30.695258105Z","created_by":"exedev","metadata":"{}","thread_id":""}]}
{"id":"bd-4yc.3.2","title":"serve3 subtask: syntect fenced-code highlighting + language fallback","description":"Objective and Scope:\nApply server-side syntax highlighting for fenced code blocks.\n\nImplementation Details:\nIntegrate syntect highlighting into SSR pipeline with graceful fallback when language is unknown.\n\nDependency Links:\nParent task is bd-4yc.3; blocked by bd-4yc.3.1.\n\nAcceptance Criteria:\nCode blocks receive deterministic highlighted HTML where grammar exists; unknown grammars remain readable plain output.\n\nVerification Steps (unit and e2e requirements, with logging expectations):\nUnit tests for language lookup and fallback paths; e2e fixtures verify highlighted output; logs include unknown-language fallback counts.\\n\\nBackground / Rationale / Constraints / Intent:\\nThis bead is self-contained for future maintainers and should be implementable without reopening plan docs. Keep scope tight, preserve existing mdmd behavior outside serve3 Gate A, and prefer deterministic logs/tests so regressions are diagnosable.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-23T21:35:30.853438772Z","created_by":"exedev","updated_at":"2026-02-23T23:50:01.908803438Z","closed_at":"2026-02-23T23:50:01.908778721Z","close_reason":"Cleaning up failed planner run","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-4yc.3.2","depends_on_id":"bd-4yc.3","type":"parent-child","created_at":"2026-02-23T21:35:30.853438772Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.3.2","depends_on_id":"bd-4yc.3.1","type":"blocks","created_at":"2026-02-23T21:35:37.153176197Z","created_by":"exedev","metadata":"{}","thread_id":""}]}
{"id":"bd-4yc.3.3","title":"serve3 subtask: local markdown link rewriting","description":"Objective and Scope:\nRewrite internal markdown links into serve routes across nested directories.\n\nImplementation Details:\nRewrite relative links targeting local markdown while preserving external URLs, mailto links, fragments, and non-markdown asset links.\n\nDependency Links:\nParent task is bd-4yc.3; blocked by bd-4yc.3.1.\n\nAcceptance Criteria:\nInter-file links resolve correctly via HTTP routes; non-local links are unchanged.\n\nVerification Steps (unit and e2e requirements, with logging expectations):\nUnit tests for relative normalization and anchor handling; e2e click-through tests across fixture tree; debug logs may include rewrite count per page.\\n\\nBackground / Rationale / Constraints / Intent:\\nThis bead is self-contained for future maintainers and should be implementable without reopening plan docs. Keep scope tight, preserve existing mdmd behavior outside serve3 Gate A, and prefer deterministic logs/tests so regressions are diagnosable.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-23T21:35:31.012106133Z","created_by":"exedev","updated_at":"2026-02-23T23:50:01.683506650Z","closed_at":"2026-02-23T23:50:01.683486517Z","close_reason":"Cleaning up failed planner run","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-4yc.3.3","depends_on_id":"bd-4yc.3","type":"parent-child","created_at":"2026-02-23T21:35:31.012106133Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.3.3","depends_on_id":"bd-4yc.3.1","type":"blocks","created_at":"2026-02-23T21:35:37.333236058Z","created_by":"exedev","metadata":"{}","thread_id":""}]}
{"id":"bd-4yc.3.4","title":"serve3 subtask: SSR parity fixture corpus for GFM baseline","description":"Objective and Scope:\nLock down baseline GitHub-flavored markdown parity using fixture-driven SSR tests so rendering changes remain intentional and reviewable.\n\nImplementation Details:\n- Add canonical fixture corpus covering tables, task lists, fenced code, autolinks, strikethrough, nested lists, blockquotes, and mixed inline formatting.\n- Verify SSR output includes expected structural HTML markers for each fixture and stays stable across parser upgrades.\n- Keep assertions focused on semantic structure (tags/classes/ids), not brittle whitespace.\n- Document fixture intent and expected behavior inside test files for maintainability.\n\nDependency Links:\nParent: bd-4yc.3.\nBlocked by: bd-4yc.3.2 and bd-4yc.3.3 (highlighting + link rewrite finalized first).\nBlocks: validation matrix completeness in bd-4yc.8.1 and bd-4yc.8.2.\n\nAcceptance Criteria:\n- Fixture corpus exists and is wired into automated tests.\n- SSR semantic output for GFM baseline features is asserted and passing.\n- Renderer regressions produce actionable diffs.\n\nVerification Steps (unit and e2e requirements, with logging expectations):\n- Unit: parser/render option tests map each fixture feature to expected output markers.\n- E2E: serve fixture tree and validate rendered HTML contains expected structures.\n- Logging: optional debug logs include fixture name and render profile used during test runs.\n\nBackground / Rationale / Constraints / Intent:\n“Support everything GitHub does” is broad; fixture-backed semantic checks establish a practical, maintainable baseline that can be expanded without destabilizing Gate A.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-23T21:39:23.116382262Z","created_by":"exedev","updated_at":"2026-02-23T23:50:03.309058989Z","closed_at":"2026-02-23T23:50:03.309037558Z","close_reason":"Cleaning up failed planner run","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-4yc.3.4","depends_on_id":"bd-4yc.3","type":"parent-child","created_at":"2026-02-23T21:39:23.116382262Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.3.4","depends_on_id":"bd-4yc.3.2","type":"blocks","created_at":"2026-02-23T21:39:51.208254273Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.3.4","depends_on_id":"bd-4yc.3.3","type":"blocks","created_at":"2026-02-23T21:39:51.448587131Z","created_by":"exedev","metadata":"{}","thread_id":""}]}
{"id":"bd-4yc.4","title":"serve3 slice 3b: mermaid assets + mode control","description":"Objective and Scope:\nProvide Mermaid support in serve mode with offline-first asset delivery and deterministic mode gating.\n\nImplementation Details:\nBundle Mermaid runtime in mdmd assets, expose it via /__mdmd/assets/*, and gate runtime injection using --mermaid-mode client|off (default client).\n\nDependency Links:\nParent: bd-4yc. Blocked by bd-4yc.3. Child chain: bd-4yc.4.1 -> bd-4yc.4.2. Validation dependency consumers: bd-4yc.8 and bd-4yc.8.2.\n\nAcceptance Criteria:\nClient mode renders Mermaid without CDN/network dependency; off mode suppresses runtime injection and execution.\n\nVerification Steps (unit and e2e requirements, with logging expectations):\nUnit: mode parsing/template branch tests.\nE2E: offline asset fetch + enabled/disabled diagram behavior.\nLogging: startup field for effective Mermaid mode.\n\nBackground / Rationale / Constraints / Intent:\nGate A requires Mermaid compatibility while keeping server architecture SSR-first. Client-side Mermaid execution is a deliberate compromise; server-side Mermaid rendering is out of scope for this phase.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-23T21:35:29.386858973Z","created_by":"exedev","updated_at":"2026-02-23T23:50:02.592743076Z","closed_at":"2026-02-23T23:50:02.592723402Z","close_reason":"Cleaning up failed planner run","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-4yc.4","depends_on_id":"bd-4yc","type":"parent-child","created_at":"2026-02-23T21:35:29.386858973Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.4","depends_on_id":"bd-4yc.3","type":"blocks","created_at":"2026-02-23T21:35:33.831288165Z","created_by":"exedev","metadata":"{}","thread_id":""}]}
{"id":"bd-4yc.4.1","title":"serve3 subtask: bundled mermaid asset route","description":"Objective and Scope:\nShip and serve mermaid runtime from built-in assets endpoint.\n\nImplementation Details:\nExpose __mdmd assets route for embedded assets and ensure no CDN dependency.\n\nDependency Links:\nParent task is bd-4yc.4; blocked by bd-4yc.3.\n\nAcceptance Criteria:\nMermaid runtime is available from local assets route in offline environment.\n\nVerification Steps (unit and e2e requirements, with logging expectations):\nUnit tests for asset path routing; e2e fetches asset endpoint without network; startup logs include asset mount path.\\n\\nBackground / Rationale / Constraints / Intent:\\nThis bead is self-contained for future maintainers and should be implementable without reopening plan docs. Keep scope tight, preserve existing mdmd behavior outside serve3 Gate A, and prefer deterministic logs/tests so regressions are diagnosable.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-23T21:35:31.181830949Z","created_by":"exedev","updated_at":"2026-02-23T23:50:01.453758111Z","closed_at":"2026-02-23T23:50:01.453739114Z","close_reason":"Cleaning up failed planner run","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-4yc.4.1","depends_on_id":"bd-4yc.3","type":"blocks","created_at":"2026-02-23T21:35:37.524723648Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.4.1","depends_on_id":"bd-4yc.4","type":"parent-child","created_at":"2026-02-23T21:35:31.181830949Z","created_by":"exedev","metadata":"{}","thread_id":""}]}
{"id":"bd-4yc.4.2","title":"serve3 subtask: mermaid mode client/off behavior","description":"Objective and Scope:\nImplement deterministic mermaid mode behavior in rendered pages.\n\nImplementation Details:\nDefault client mode injects runtime bootstrap; off mode omits scripts and avoids runtime execution.\n\nDependency Links:\nParent task is bd-4yc.4; blocked by bd-4yc.4.1.\n\nAcceptance Criteria:\nMode switch reliably controls script injection and runtime behavior.\n\nVerification Steps (unit and e2e requirements, with logging expectations):\nUnit tests for mode parsing and template branch; e2e verifies diagram render versus disabled state; logs show effective mermaid mode.\\n\\nBackground / Rationale / Constraints / Intent:\\nThis bead is self-contained for future maintainers and should be implementable without reopening plan docs. Keep scope tight, preserve existing mdmd behavior outside serve3 Gate A, and prefer deterministic logs/tests so regressions are diagnosable.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-23T21:35:31.353549998Z","created_by":"exedev","updated_at":"2026-02-23T23:50:03.959219719Z","closed_at":"2026-02-23T23:50:03.959199826Z","close_reason":"Cleaning up failed planner run","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-4yc.4.2","depends_on_id":"bd-4yc.4","type":"parent-child","created_at":"2026-02-23T21:35:31.353549998Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.4.2","depends_on_id":"bd-4yc.4.1","type":"blocks","created_at":"2026-02-23T21:35:37.726305319Z","created_by":"exedev","metadata":"{}","thread_id":""}]}
{"id":"bd-4yc.5","title":"serve3 slice 4: heading-first navigation UX","description":"Objective and Scope:\nImplement heading-first reading/navigation UX with persistent TOC and stable heading identity.\n\nImplementation Details:\nExtract heading tree during SSR, generate deterministic GitHub-like IDs with collision suffixing, render persistent TOC/sidebar + file-path chrome, and apply minimal client enhancements for active-heading highlight and smooth TOC scroll.\n\nDependency Links:\nParent: bd-4yc. Blocked by bd-4yc.3. Child chain: bd-4yc.5.1 -> bd-4yc.5.2 -> bd-4yc.5.3. Consumed by validation tasks bd-4yc.8, bd-4yc.8.1, bd-4yc.8.2.\n\nAcceptance Criteria:\nTOC is always present for markdown pages; duplicate headings map to stable unique anchors; active heading highlight tracks viewport position.\n\nVerification Steps (unit and e2e requirements, with logging expectations):\nUnit: slug generation/collision behavior and heading tree structure.\nE2E: TOC visibility, highlight transitions, smooth scrolling.\nLogging: heading count and collision count for rendered pages.\n\nBackground / Rationale / Constraints / Intent:\nThe heading system is a first-class requirement for long-form docs navigation. Keep JS minimal and deterministic so SSR remains dominant.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-23T21:35:29.515881229Z","created_by":"exedev","updated_at":"2026-02-23T23:50:02.356120491Z","closed_at":"2026-02-23T23:50:02.356099566Z","close_reason":"Cleaning up failed planner run","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-4yc.5","depends_on_id":"bd-4yc","type":"parent-child","created_at":"2026-02-23T21:35:29.515881229Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.5","depends_on_id":"bd-4yc.3","type":"blocks","created_at":"2026-02-23T21:35:34.041360323Z","created_by":"exedev","metadata":"{}","thread_id":""}]}
{"id":"bd-4yc.5.1","title":"serve3 subtask: heading extraction + deterministic slug collisions","description":"Objective and Scope:\nGenerate stable heading IDs and hierarchical TOC data during SSR.\n\nImplementation Details:\nImplement GitHub-like slug normalization and collision suffixing while preserving heading order and depth.\n\nDependency Links:\nParent task is bd-4yc.5; blocked by bd-4yc.3.\n\nAcceptance Criteria:\nDuplicate headings produce stable unique IDs across runs and content order.\n\nVerification Steps (unit and e2e requirements, with logging expectations):\nUnit tests for slug normalization and collision cases; e2e snapshot validates TOC ID consistency; debug logs include collision metrics.\\n\\nBackground / Rationale / Constraints / Intent:\\nThis bead is self-contained for future maintainers and should be implementable without reopening plan docs. Keep scope tight, preserve existing mdmd behavior outside serve3 Gate A, and prefer deterministic logs/tests so regressions are diagnosable.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-23T21:35:31.520795592Z","created_by":"exedev","updated_at":"2026-02-23T23:50:01.212670278Z","closed_at":"2026-02-23T23:50:01.212643780Z","close_reason":"Cleaning up failed planner run","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-4yc.5.1","depends_on_id":"bd-4yc.3","type":"blocks","created_at":"2026-02-23T21:35:37.933496939Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.5.1","depends_on_id":"bd-4yc.5","type":"parent-child","created_at":"2026-02-23T21:35:31.520795592Z","created_by":"exedev","metadata":"{}","thread_id":""}]}
{"id":"bd-4yc.5.2","title":"serve3 subtask: persistent TOC + file path chrome","description":"Objective and Scope:\nRender always-visible heading TOC and display current file path in page header chrome.\n\nImplementation Details:\nInject TOC sidebar into page template with responsive layout behavior and current file indicator.\n\nDependency Links:\nParent task is bd-4yc.5; blocked by bd-4yc.5.1.\n\nAcceptance Criteria:\nTOC appears for markdown pages and file path is visible in desktop and mobile layouts.\n\nVerification Steps (unit and e2e requirements, with logging expectations):\nBrowser e2e checks for TOC and file path visibility at multiple viewport sizes; logs may include rendered heading count.\\n\\nBackground / Rationale / Constraints / Intent:\\nThis bead is self-contained for future maintainers and should be implementable without reopening plan docs. Keep scope tight, preserve existing mdmd behavior outside serve3 Gate A, and prefer deterministic logs/tests so regressions are diagnosable.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-23T21:35:31.701401898Z","created_by":"exedev","updated_at":"2026-02-23T23:50:03.735251032Z","closed_at":"2026-02-23T23:50:03.735231243Z","close_reason":"Cleaning up failed planner run","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-4yc.5.2","depends_on_id":"bd-4yc.5","type":"parent-child","created_at":"2026-02-23T21:35:31.701401898Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.5.2","depends_on_id":"bd-4yc.5.1","type":"blocks","created_at":"2026-02-23T21:35:38.139309085Z","created_by":"exedev","metadata":"{}","thread_id":""}]}
{"id":"bd-4yc.5.3","title":"serve3 subtask: active heading highlight + smooth TOC scrolling","description":"Objective and Scope:\nAdd minimal client enhancements for navigation usability.\n\nImplementation Details:\nUse IntersectionObserver for active heading highlight and smooth scrolling behavior for TOC anchor navigation.\n\nDependency Links:\nParent task is bd-4yc.5; blocked by bd-4yc.5.2.\n\nAcceptance Criteria:\nActive TOC item tracks in-view heading and TOC clicks scroll smoothly to target anchors.\n\nVerification Steps (unit and e2e requirements, with logging expectations):\nBrowser e2e validates active-state transitions and smooth scrolling behavior; debug logs may emit script initialization success.\\n\\nBackground / Rationale / Constraints / Intent:\\nThis bead is self-contained for future maintainers and should be implementable without reopening plan docs. Keep scope tight, preserve existing mdmd behavior outside serve3 Gate A, and prefer deterministic logs/tests so regressions are diagnosable.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-02-23T21:35:31.874026576Z","created_by":"exedev","updated_at":"2026-02-23T23:50:04.424130597Z","closed_at":"2026-02-23T23:50:04.424105700Z","close_reason":"Cleaning up failed planner run","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-4yc.5.3","depends_on_id":"bd-4yc.5","type":"parent-child","created_at":"2026-02-23T21:35:31.874026576Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.5.3","depends_on_id":"bd-4yc.5.2","type":"blocks","created_at":"2026-02-23T21:35:38.356439839Z","created_by":"exedev","metadata":"{}","thread_id":""}]}
{"id":"bd-4yc.6","title":"serve3 slice 5: cache + revalidation + compression","description":"Objective and Scope:\nDeliver performance-oriented HTTP behavior via render caching, conditional revalidation, and compression with standards-correct interactions.\n\nImplementation Details:\nCache markdown render output using canonical path + (mtime,size), emit ETag and Last-Modified validators, handle 304 responses correctly, and apply compression middleware for text responses while preserving validator/cache correctness across encodings.\n\nDependency Links:\nParent: bd-4yc. Blocked by bd-4yc.2 and bd-4yc.3. Child chain: bd-4yc.6.1 -> bd-4yc.6.2 -> bd-4yc.6.3 -> bd-4yc.6.4.\n\nAcceptance Criteria:\nCache hit/miss/invalidation behavior is deterministic; conditional requests are correct; compression does not break validator semantics.\n\nVerification Steps (unit and e2e requirements, with logging expectations):\nUnit: key derivation, validator precedence, response decision matrix.\nE2E: Accept-Encoding and conditional-header permutations with body/header assertions.\nLogging: per-request cache, revalidation, and compression decision fields.\n\nBackground / Rationale / Constraints / Intent:\nPerformance improvements are required but must remain diagnosable. Explicit matrix testing/logging prevents subtle regressions in cache and HTTP semantics.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-23T21:35:29.645543778Z","created_by":"exedev","updated_at":"2026-02-23T23:50:02.132420002Z","closed_at":"2026-02-23T23:50:02.132399660Z","close_reason":"Cleaning up failed planner run","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-4yc.6","depends_on_id":"bd-4yc","type":"parent-child","created_at":"2026-02-23T21:35:29.645543778Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.6","depends_on_id":"bd-4yc.2","type":"blocks","created_at":"2026-02-23T21:35:34.454979514Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.6","depends_on_id":"bd-4yc.3","type":"blocks","created_at":"2026-02-23T21:35:34.248732122Z","created_by":"exedev","metadata":"{}","thread_id":""}]}
{"id":"bd-4yc.6.1","title":"serve3 subtask: render cache keyed by canonical path + (mtime,size)","description":"Objective and Scope:\nImplement cache entries that invalidate on source content changes.\n\nImplementation Details:\nCache rendered output by canonical path and file metadata tuple mtime plus size to avoid stale responses.\n\nDependency Links:\nParent task is bd-4yc.6; blocked by bd-4yc.3 and bd-4yc.2.\n\nAcceptance Criteria:\nUnchanged files hit cache; modified files invalidate and re-render deterministically.\n\nVerification Steps (unit and e2e requirements, with logging expectations):\nUnit tests for key generation and invalidation; e2e repeated request timing and content refresh checks; logs include hit, miss, and invalidate events.\\n\\nBackground / Rationale / Constraints / Intent:\\nThis bead is self-contained for future maintainers and should be implementable without reopening plan docs. Keep scope tight, preserve existing mdmd behavior outside serve3 Gate A, and prefer deterministic logs/tests so regressions are diagnosable.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-23T21:35:32.041052665Z","created_by":"exedev","updated_at":"2026-02-23T23:50:00.975420636Z","closed_at":"2026-02-23T23:50:00.975401775Z","close_reason":"Cleaning up failed planner run","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-4yc.6.1","depends_on_id":"bd-4yc.2","type":"blocks","created_at":"2026-02-23T21:35:38.791973057Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.6.1","depends_on_id":"bd-4yc.3","type":"blocks","created_at":"2026-02-23T21:35:38.566792740Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.6.1","depends_on_id":"bd-4yc.6","type":"parent-child","created_at":"2026-02-23T21:35:32.041052665Z","created_by":"exedev","metadata":"{}","thread_id":""}]}
{"id":"bd-4yc.6.2","title":"serve3 subtask: ETag/Last-Modified + conditional 304","description":"Objective and Scope:\nSupport HTTP revalidation semantics for markdown and text responses.\n\nImplementation Details:\nEmit validators and evaluate If-None-Match and If-Modified-Since to return 304 when appropriate.\n\nDependency Links:\nParent task is bd-4yc.6; blocked by bd-4yc.6.1.\n\nAcceptance Criteria:\nConditional requests return correct status and header behavior with empty body on 304.\n\nVerification Steps (unit and e2e requirements, with logging expectations):\nUnit tests for validator precedence rules; e2e with curl header scenarios; logs capture revalidation decision and matched validator type.\\n\\nBackground / Rationale / Constraints / Intent:\\nThis bead is self-contained for future maintainers and should be implementable without reopening plan docs. Keep scope tight, preserve existing mdmd behavior outside serve3 Gate A, and prefer deterministic logs/tests so regressions are diagnosable.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-23T21:35:32.209581284Z","created_by":"exedev","updated_at":"2026-02-23T23:50:03.524555710Z","closed_at":"2026-02-23T23:50:03.524536058Z","close_reason":"Cleaning up failed planner run","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-4yc.6.2","depends_on_id":"bd-4yc.6","type":"parent-child","created_at":"2026-02-23T21:35:32.209581284Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.6.2","depends_on_id":"bd-4yc.6.1","type":"blocks","created_at":"2026-02-23T21:35:39.003274579Z","created_by":"exedev","metadata":"{}","thread_id":""}]}
{"id":"bd-4yc.6.3","title":"serve3 subtask: compression middleware tuning","description":"Objective and Scope:\nEnable compression for eligible responses without breaking cache and revalidation correctness.\n\nImplementation Details:\nConfigure compression middleware for text-like content and verify compatibility with validator headers.\n\nDependency Links:\nParent task is bd-4yc.6; blocked by bd-4yc.6.2.\n\nAcceptance Criteria:\nResponses compress when client advertises support and remain standards-compliant with existing headers.\n\nVerification Steps (unit and e2e requirements, with logging expectations):\nIntegration tests with Accept-Encoding variants; e2e checks Content-Encoding and body integrity; logs indicate compression choice at debug level.\\n\\nBackground / Rationale / Constraints / Intent:\\nThis bead is self-contained for future maintainers and should be implementable without reopening plan docs. Keep scope tight, preserve existing mdmd behavior outside serve3 Gate A, and prefer deterministic logs/tests so regressions are diagnosable.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-02-23T21:35:32.388254280Z","created_by":"exedev","updated_at":"2026-02-23T23:50:04.193858401Z","closed_at":"2026-02-23T23:50:04.193838881Z","close_reason":"Cleaning up failed planner run","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-4yc.6.3","depends_on_id":"bd-4yc.6","type":"parent-child","created_at":"2026-02-23T21:35:32.388254280Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.6.3","depends_on_id":"bd-4yc.6.2","type":"blocks","created_at":"2026-02-23T21:35:39.216980227Z","created_by":"exedev","metadata":"{}","thread_id":""}]}
{"id":"bd-4yc.6.4","title":"serve3 subtask: cache-validator-compression interaction matrix","description":"Objective and Scope:\nValidate the interaction boundaries between cache, validators, and compression so response correctness is preserved under real client negotiation patterns.\n\nImplementation Details:\n- Define behavior for ETag/Last-Modified with compressed and uncompressed responses.\n- Ensure 304 responses are emitted without response body and with correct validator semantics.\n- Verify compression does not invalidate cache-key assumptions or leak stale variants.\n- Add targeted tests for Accept-Encoding transitions and repeated conditional requests.\n\nDependency Links:\nParent: bd-4yc.6.\nBlocked by: bd-4yc.6.3 (compression middleware configured first).\nBlocks: final e2e and logging assertions under bd-4yc.8.2.\n\nAcceptance Criteria:\n- Conditional requests behave correctly regardless of compression negotiation.\n- Cache hits/misses remain deterministic across encoding variants.\n- 304 and compressed 200 responses satisfy HTTP correctness expectations.\n\nVerification Steps (unit and e2e requirements, with logging expectations):\n- Unit: validator/compression decision matrix tests.\n- E2E: sequential requests toggling Accept-Encoding and conditional headers.\n- Logging: assert cache + revalidate + compression reason fields are present per markdown request.\n\nBackground / Rationale / Constraints / Intent:\nThese features are individually straightforward but fragile in combination; explicit matrix testing prevents subtle production bugs where caches and validators disagree across encodings.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-02-23T21:39:30.658122945Z","created_by":"exedev","updated_at":"2026-02-23T23:50:04.906593116Z","closed_at":"2026-02-23T23:50:04.906560987Z","close_reason":"Cleaning up failed planner run","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-4yc.6.4","depends_on_id":"bd-4yc.6","type":"parent-child","created_at":"2026-02-23T21:39:30.658122945Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.6.4","depends_on_id":"bd-4yc.6.3","type":"blocks","created_at":"2026-02-23T21:39:51.686504681Z","created_by":"exedev","metadata":"{}","thread_id":""}]}
{"id":"bd-4yc.7","title":"serve3 slice 6: tailscale host policy + startup URLs","description":"Objective and Scope:\nImplement tailscale-aware startup URL policy with safe probing, explicit override behavior, and deterministic output.\n\nImplementation Details:\nProbe tailscale via `tailscale status --json` with timeout, parse `.Self.DNSName` safely, apply default bind-host policy when --host is absent, always print localhost fallback URL, and enforce strict --no-tailscale probe suppression with rationale logging.\n\nDependency Links:\nParent: bd-4yc. Blocked by bd-4yc.1. Child chain: bd-4yc.7.1 -> bd-4yc.7.2 -> bd-4yc.7.3. Consumed by validation tasks bd-4yc.8, bd-4yc.8.1, bd-4yc.8.3.\n\nAcceptance Criteria:\nStartup URL policy is deterministic across tailscale present/absent/error/no-tailscale/host-override cases; probe path never hangs startup.\n\nVerification Steps (unit and e2e requirements, with logging expectations):\nUnit: tailscale parse and host-policy matrix.\nE2E: mocked probe outputs and probe suppression checks.\nLogging: probe duration/outcome class, policy branch selected, and printed primary+fallback URLs.\n\nBackground / Rationale / Constraints / Intent:\nStartup output is an operator contract. This slice ensures URL selection is explainable and stable regardless of machine tailscale state.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-23T21:35:29.802371840Z","created_by":"exedev","updated_at":"2026-02-23T23:49:48.739254977Z","closed_at":"2026-02-23T23:49:48.739231967Z","close_reason":"Cleaning up failed planner run","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-4yc.7","depends_on_id":"bd-4yc","type":"parent-child","created_at":"2026-02-23T21:35:29.802371840Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.7","depends_on_id":"bd-4yc.1","type":"blocks","created_at":"2026-02-23T21:35:34.661901456Z","created_by":"exedev","metadata":"{}","thread_id":""}]}
{"id":"bd-4yc.7.1","title":"serve3 subtask: tailscale probe execution + DNSName parsing","description":"Objective and Scope:\nDetect tailscale hostname safely and quickly for URL selection.\n\nImplementation Details:\nExecute tailscale status JSON with timeout; parse Self DNSName and trim trailing dot; gracefully handle command absence, failure, timeout, and malformed JSON.\n\nDependency Links:\nParent task is bd-4yc.7; blocked by bd-4yc.1.\n\nAcceptance Criteria:\nProbe never blocks startup beyond timeout; valid DNSName is normalized for host output.\n\nVerification Steps (unit and e2e requirements, with logging expectations):\nUnit tests for parser success, failure, and timeout cases; e2e with mocked command outputs; logs include probe duration and outcome category.\\n\\nBackground / Rationale / Constraints / Intent:\\nThis bead is self-contained for future maintainers and should be implementable without reopening plan docs. Keep scope tight, preserve existing mdmd behavior outside serve3 Gate A, and prefer deterministic logs/tests so regressions are diagnosable.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-23T21:35:32.592043269Z","created_by":"exedev","updated_at":"2026-02-23T23:49:48.454538823Z","closed_at":"2026-02-23T23:49:48.454508319Z","close_reason":"Cleaning up failed planner run","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-4yc.7.1","depends_on_id":"bd-4yc.1","type":"blocks","created_at":"2026-02-23T21:35:39.439599494Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.7.1","depends_on_id":"bd-4yc.7","type":"parent-child","created_at":"2026-02-23T21:35:32.592043269Z","created_by":"exedev","metadata":"{}","thread_id":""}]}
{"id":"bd-4yc.7.2","title":"serve3 subtask: bind-host defaults + URL print policy","description":"Objective and Scope:\nApply bind-host policy and deterministic startup URL printing.\n\nImplementation Details:\nDefault host selection follows tailscale presence unless host override is set; always print primary URL and localhost fallback; include resolved root and entry in startup output.\n\nDependency Links:\nParent task is bd-4yc.7; blocked by bd-4yc.7.1.\n\nAcceptance Criteria:\nStartup output consistently includes host, URL, root, and entry fields and honors explicit host override.\n\nVerification Steps (unit and e2e requirements, with logging expectations):\nUnit tests for host policy matrix; e2e startup output snapshot tests; logs show final selected host reason.\\n\\nBackground / Rationale / Constraints / Intent:\\nThis bead is self-contained for future maintainers and should be implementable without reopening plan docs. Keep scope tight, preserve existing mdmd behavior outside serve3 Gate A, and prefer deterministic logs/tests so regressions are diagnosable.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-23T21:35:32.790374833Z","created_by":"exedev","updated_at":"2026-02-23T23:49:59.383362137Z","closed_at":"2026-02-23T23:49:59.383342274Z","close_reason":"Cleaning up failed planner run","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-4yc.7.2","depends_on_id":"bd-4yc.7","type":"parent-child","created_at":"2026-02-23T21:35:32.790374833Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.7.2","depends_on_id":"bd-4yc.7.1","type":"blocks","created_at":"2026-02-23T21:35:39.661982228Z","created_by":"exedev","metadata":"{}","thread_id":""}]}
{"id":"bd-4yc.7.3","title":"serve3 subtask: --no-tailscale probe suppression + URL rationale","description":"Objective and Scope:\nGuarantee deterministic behavior when tailscale probing is explicitly disabled and clarify startup rationale for host/url selection.\n\nImplementation Details:\n- Implement strict no-probe path when --no-tailscale is enabled.\n- Ensure bind-host defaults and startup URL selection follow policy without reading tailscale state in disabled mode.\n- Emit explicit startup rationale line indicating whether selection came from tailscale probe, explicit --host override, or --no-tailscale policy path.\n\nDependency Links:\nParent: bd-4yc.7.\nBlocked by: bd-4yc.7.2 (host policy implementation first).\nBlocks: validation tasks that assert URL rationale and probe suppression.\n\nAcceptance Criteria:\n- --no-tailscale fully suppresses probe execution.\n- Startup output and logs clearly indicate no-tailscale decision path.\n- URL printing remains primary + localhost fallback and consistent with host policy.\n\nVerification Steps (unit and e2e requirements, with logging expectations):\n- Unit: decision-matrix tests verify probe suppression and host selection outputs.\n- E2E: mocked environment confirms tailscale binary is not invoked when flag set.\n- Logging: assert rationale field values for probe_used, probe_skipped_no_tailscale, and host_override.\n\nBackground / Rationale / Constraints / Intent:\nUsers may disable tailscale for privacy, startup speed, or predictable localhost-only behavior. The disabled path must be explicit and observable to avoid confusing URL output.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-23T21:39:37.774022432Z","created_by":"exedev","updated_at":"2026-02-23T23:50:00.499022411Z","closed_at":"2026-02-23T23:50:00.498997096Z","close_reason":"Cleaning up failed planner run","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-4yc.7.3","depends_on_id":"bd-4yc.7","type":"parent-child","created_at":"2026-02-23T21:39:37.774022432Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.7.3","depends_on_id":"bd-4yc.7.2","type":"blocks","created_at":"2026-02-23T21:39:51.918388594Z","created_by":"exedev","metadata":"{}","thread_id":""}]}
{"id":"bd-4yc.8","title":"serve3 validation: unit/e2e matrix + logging assertions","description":"Objective and Scope:\nCodify complete verification evidence for Gate A across unit and end-to-end levels, including required observability assertions.\n\nImplementation Details:\nDefine coverage matrix tasks for all invariants, fixture-based end-to-end suites for routing/rendering/UX/performance, and dedicated startup URL behavior matrix with tailscale/no-tailscale/override permutations.\n\nDependency Links:\nParent: bd-4yc. Blocked by bd-4yc.1 through bd-4yc.7. Child chain: bd-4yc.8.1 -> bd-4yc.8.2 -> bd-4yc.8.3.\n\nAcceptance Criteria:\nAll Gate A contracts are enforced by deterministic tests and logging assertions; suite is CI-ready and not dependent on host-local tailscale state.\n\nVerification Steps (unit and e2e requirements, with logging expectations):\nUnit: contract-level invariant tests per slice.\nE2E: fixture matrix + startup matrix with mocked tailscale outputs.\nLogging: assert startup summary, resolver choices, renderer mode, cache decisions, and tailscale rationale fields.\n\nBackground / Rationale / Constraints / Intent:\nThis task prevents incomplete delivery by requiring objective evidence for every promised behavior in Gate A.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-23T21:35:29.947873520Z","created_by":"exedev","updated_at":"2026-02-23T23:50:03.098319110Z","closed_at":"2026-02-23T23:50:03.098298596Z","close_reason":"Cleaning up failed planner run","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-4yc.8","depends_on_id":"bd-4yc","type":"parent-child","created_at":"2026-02-23T21:35:29.947873520Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.8","depends_on_id":"bd-4yc.1","type":"blocks","created_at":"2026-02-23T21:35:34.872887464Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.8","depends_on_id":"bd-4yc.2","type":"blocks","created_at":"2026-02-23T21:35:35.080385509Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.8","depends_on_id":"bd-4yc.3","type":"blocks","created_at":"2026-02-23T21:35:35.293042767Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.8","depends_on_id":"bd-4yc.4","type":"blocks","created_at":"2026-02-23T21:35:35.503037850Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.8","depends_on_id":"bd-4yc.5","type":"blocks","created_at":"2026-02-23T21:35:35.715077836Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.8","depends_on_id":"bd-4yc.6","type":"blocks","created_at":"2026-02-23T21:35:35.927771127Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.8","depends_on_id":"bd-4yc.7","type":"blocks","created_at":"2026-02-23T21:35:36.135337555Z","created_by":"exedev","metadata":"{}","thread_id":""}]}
{"id":"bd-4yc.8.1","title":"serve3 subtask: unit coverage matrix for all Gate A invariants","description":"Objective and Scope:\nImplement broad unit coverage for deterministic serve behavior and edge conditions.\n\nImplementation Details:\nAdd unit tests for CLI parsing, port retries, resolver precedence, escape rejection, renderer configuration, slug collisions, cache validators, and tailscale parsing policy.\n\nDependency Links:\nParent task is bd-4yc.8; blocked by bd-4yc.1, bd-4yc.2, bd-4yc.3, bd-4yc.5, bd-4yc.6, and bd-4yc.7.\n\nAcceptance Criteria:\nCritical invariants have dedicated unit tests with clear failure messages.\n\nVerification Steps (unit and e2e requirements, with logging expectations):\nRun unit targets and enforce pass; capture and assert key log fields where feasible via test logger harness.\\n\\nBackground / Rationale / Constraints / Intent:\\nThis bead is self-contained for future maintainers and should be implementable without reopening plan docs. Keep scope tight, preserve existing mdmd behavior outside serve3 Gate A, and prefer deterministic logs/tests so regressions are diagnosable.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-23T21:35:32.994972218Z","created_by":"exedev","updated_at":"2026-02-23T23:50:02.885223530Z","closed_at":"2026-02-23T23:50:02.885203714Z","close_reason":"Cleaning up failed planner run","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-4yc.8.1","depends_on_id":"bd-4yc.1","type":"blocks","created_at":"2026-02-23T21:35:39.892882472Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.8.1","depends_on_id":"bd-4yc.2","type":"blocks","created_at":"2026-02-23T21:35:40.114815019Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.8.1","depends_on_id":"bd-4yc.3","type":"blocks","created_at":"2026-02-23T21:35:40.326388638Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.8.1","depends_on_id":"bd-4yc.5","type":"blocks","created_at":"2026-02-23T21:35:40.550321499Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.8.1","depends_on_id":"bd-4yc.6","type":"blocks","created_at":"2026-02-23T21:35:40.775188659Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.8.1","depends_on_id":"bd-4yc.7","type":"blocks","created_at":"2026-02-23T21:35:40.996278258Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.8.1","depends_on_id":"bd-4yc.8","type":"parent-child","created_at":"2026-02-23T21:35:32.994972218Z","created_by":"exedev","metadata":"{}","thread_id":""}]}
{"id":"bd-4yc.8.2","title":"serve3 subtask: e2e fixture matrix + logging assertions","description":"Objective and Scope:\nValidate end-to-end behavior with fixture trees and startup/runtime observability assertions.\n\nImplementation Details:\nAdd integration tests for routing, rendering, mermaid modes, TOC UX signals, 404/raw/static MIME behavior, revalidation/compression, and tailscale URL fallback.\n\nDependency Links:\nParent task is bd-4yc.8; blocked by bd-4yc.8.1, bd-4yc.4, bd-4yc.5, and bd-4yc.6.\n\nAcceptance Criteria:\nE2E suite passes and verifies key startup and request logs needed to debug production failures.\n\nVerification Steps (unit and e2e requirements, with logging expectations):\nRun integration targets with deterministic fixtures and assert logs for startup summary, resolver choice, render mode, cache status, and tailscale probe result.\\n\\nBackground / Rationale / Constraints / Intent:\\nThis bead is self-contained for future maintainers and should be implementable without reopening plan docs. Keep scope tight, preserve existing mdmd behavior outside serve3 Gate A, and prefer deterministic logs/tests so regressions are diagnosable.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-23T21:35:33.207046223Z","created_by":"exedev","updated_at":"2026-02-23T23:50:04.673287798Z","closed_at":"2026-02-23T23:50:04.673264648Z","close_reason":"Cleaning up failed planner run","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-4yc.8.2","depends_on_id":"bd-4yc.4","type":"blocks","created_at":"2026-02-23T21:35:41.427911599Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.8.2","depends_on_id":"bd-4yc.5","type":"blocks","created_at":"2026-02-23T21:35:41.651114971Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.8.2","depends_on_id":"bd-4yc.6","type":"blocks","created_at":"2026-02-23T21:35:41.861442257Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.8.2","depends_on_id":"bd-4yc.8","type":"parent-child","created_at":"2026-02-23T21:35:33.207046223Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.8.2","depends_on_id":"bd-4yc.8.1","type":"blocks","created_at":"2026-02-23T21:35:41.210688270Z","created_by":"exedev","metadata":"{}","thread_id":""}]}
{"id":"bd-4yc.8.3","title":"serve3 subtask: startup URL behavior matrix e2e","description":"Objective and Scope:\nAdd an end-to-end startup matrix that validates URL and startup output behavior across local, tailscale, and override scenarios.\n\nImplementation Details:\n- Cover startup scenarios: tailscale DNS present, tailscale absent, tailscale timeout/error, --no-tailscale enabled, and explicit --host override.\n- For each scenario, assert printed primary URL, localhost fallback URL, resolved root/entry fields, and rationale log lines.\n- Reuse deterministic mocks/stubs for tailscale command responses to avoid flaky environment coupling.\n\nDependency Links:\nParent: bd-4yc.8.\nBlocked by: bd-4yc.8.2 and bd-4yc.7.3.\nBlocks: Gate A sign-off by proving startup contract stability.\n\nAcceptance Criteria:\n- Startup matrix exists and passes in CI.\n- URL output, rationale logs, and root/entry fields are asserted in every startup mode.\n- Test harness is deterministic and independent of actual machine tailscale state.\n\nVerification Steps (unit and e2e requirements, with logging expectations):\n- Unit: startup formatting/parsing helpers used by assertions.\n- E2E: scenario matrix with mocked tailscale command and host override combinations.\n- Logging: assert probe result class, selection rationale, and emitted URL pair for each run.\n\nBackground / Rationale / Constraints / Intent:\nStartup output is the operator contract for discovering the server endpoint. A dedicated matrix prevents regressions that otherwise escape basic render/routing tests.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-23T21:39:44.675427181Z","created_by":"exedev","updated_at":"2026-02-23T23:50:05.139523060Z","closed_at":"2026-02-23T23:50:05.139503575Z","close_reason":"Cleaning up failed planner run","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-4yc.8.3","depends_on_id":"bd-4yc.1.3","type":"blocks","created_at":"2026-02-23T21:39:52.635761086Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.8.3","depends_on_id":"bd-4yc.7.3","type":"blocks","created_at":"2026-02-23T21:39:52.396800835Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.8.3","depends_on_id":"bd-4yc.8","type":"parent-child","created_at":"2026-02-23T21:39:44.675427181Z","created_by":"exedev","metadata":"{}","thread_id":""},{"issue_id":"bd-4yc.8.3","depends_on_id":"bd-4yc.8.2","type":"blocks","created_at":"2026-02-23T21:39:52.156914092Z","created_by":"exedev","metadata":"{}","thread_id":""}]}
{"id":"bd-kcr","title":"serve2 slice 2: root-safe routing","description":"## Covered Sections\n- executable-decomposition\n- slice-2-root-safe-routing-and-path-resolution\n- validation-strategy\n- cross-slice-dependencies\n- gate-a-approval-checklist\n\n## Acceptance Criteria\n- Extensionless and nested markdown links resolve correctly.\n- Static assets load from root tree.\n- Root-escape/traversal attempts return `403`.\n- Missing in-root targets return `404`.\n\n## Verification Steps\n- Run routing integration tests on fixture trees covering exact, extensionless, and fallback (`README.md`, `index.md`) resolution order.\n- Run security tests with traversal payloads (`..`, encoded traversal) asserting `403`.\n- Run missing-target tests asserting `404` for unresolved in-root paths.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-23T06:57:33.904072868Z","created_by":"exedev","updated_at":"2026-02-24T00:11:17.909046231Z","closed_at":"2026-02-24T00:11:17.909026974Z","close_reason":"Cleaning up for fresh start","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-kcr","depends_on_id":"bd-28p","type":"blocks","created_at":"2026-02-23T06:57:37.302111164Z","created_by":"exedev","metadata":"{}","thread_id":""}]}
{"id":"bd-p4x","title":"Basic markdown rendering: styled text display in terminal viewport","description":"Render parsed markdown content in the ratatui terminal with basic styling: bold for headings (with size differentiation by level), italic for emphasis, colored/boxed code spans, indented block quotes, bullet/numbered lists, and horizontal rules. The content should fill the terminal viewport. No scrolling yet - just render what fits on screen.","status":"closed","priority":0,"issue_type":"feature","created_at":"2026-02-21T00:28:51.101979956Z","created_by":"exedev","updated_at":"2026-02-21T00:52:39.583653330Z","closed_at":"2026-02-21T00:52:39.583611191Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-p4x","depends_on_id":"bd-1sf","type":"blocks","created_at":"2026-02-23T05:24:10Z","created_by":"import","metadata":"{}","thread_id":""}]}
{"id":"bd-tzk","title":"Code block syntax highlighting with syntect","description":"Add syntax highlighting to fenced code blocks using the syntect crate. Detect the language from the code fence info string (e.g., ```rust, ```python) and apply appropriate syntax coloring. Fall back to plain monospace rendering for unrecognized languages or fences without a language specifier.","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-02-21T00:28:53.768940253Z","created_by":"exedev","updated_at":"2026-02-21T01:46:12.854069214Z","closed_at":"2026-02-21T01:46:12.854021443Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-tzk","depends_on_id":"bd-p4x","type":"blocks","created_at":"2026-02-23T05:24:10Z","created_by":"import","metadata":"{}","thread_id":""}]}
{"id":"bd-x0l","title":"Help/shortcuts dialog: ? to show filterable keyboard shortcuts","description":"Implement a help modal triggered by '?' that displays all keyboard shortcuts in a clean, organized list. The dialog should be filterable - typing text filters the list to show only matching shortcuts. Shortcuts should be grouped by category (Navigation, Search, View, etc.) with clear formatting.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-02-21T00:28:53.169308593Z","created_by":"exedev","updated_at":"2026-02-21T01:39:30.434893650Z","closed_at":"2026-02-21T01:39:30.434851429Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-x0l","depends_on_id":"bd-1by","type":"blocks","created_at":"2026-02-23T05:24:10Z","created_by":"import","metadata":"{}","thread_id":""}]}
